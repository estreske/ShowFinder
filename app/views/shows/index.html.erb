<script type="text/javascript">
      function initialize() {

        var mapOptions = {
          center: new google.maps.LatLng(38.5111,-96.8005),
          zoom: 4
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        <% @shows.each do |show| %>

        var myLatlng = new google.maps.LatLng(<%= Geocoder.search(show.find_address(show))[0].latitude %>,<%= Geocoder.search(show.find_address(show))[0].longitude %>);

        var contentString = '<div id="content">'+
      '<div id="siteNotice">'+
      '</div>'+
      '<h3 id="firstHeading" class="firstHeading">Event Information</h1>'+
      '<div id="bodyContent">'+
      '<p>Hosted by: <b><%= show.band.name %></b></p>'+
      '<p>Venue: <b><%= show.venue.name %> in <%= show.venue.city %>, <%= show.venue.state %></b><br><br><a href="/shows/<%= show.id %>">View More Information</a>'+
      '</p>'+
      '</div>'+
      '</div>';

      var infowindow = new google.maps.InfoWindow({
      content: contentString
  });

        var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Show Information"
});

        google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
  });

      }
      google.maps.event.addDomListener(window, 'load', initialize);
      <% end %>
    </script>
<div id="map-canvas" style="height: 500px;width: 800px">